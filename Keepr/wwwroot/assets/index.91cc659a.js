var oe=Object.defineProperty,ae=Object.defineProperties;var se=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var ne=Object.prototype.hasOwnProperty,re=Object.prototype.propertyIsEnumerable;var D=(a,e,o)=>e in a?oe(a,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):a[e]=o,B=(a,e)=>{for(var o in e||(e={}))ne.call(e,o)&&D(a,o,e[o]);if(q)for(var o of q(e))re.call(e,o)&&D(a,o,e[o]);return a},R=(a,e)=>ae(a,se(e));import{r as ie,a as le,S as U,b as j,M as b,o as c,c as d,d as s,w as S,e as y,v as x,f as ce,g as v,h as k,i as h,j as E,F as z,k as de,l as w,m as ue,n as pe,p as me,q as H,s as _e,t as _,u as ge,x as fe,y as M,z as N,A as F,B as ve,C as he,D as be,E as ye}from"./vendor.91a0a055.js";const ke=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}};ke();const i=ie({user:{},account:{},profile:{},profileKeeps:[],profileVaults:[],keeps:[],activeKeep:{},activeVault:{},activeVaultKeeps:[],activeVaultKeep:{},myVaults:[],myVaultKeeps:[]}),Y=window.location.origin.includes("localhost"),W=Y?"https://localhost:5001":"",we="dev-in-9pjrc.us.auth0.com",Ve="https://patrickdev.com",Ke="KCkMZ4ZIRzme4LvLXEQoEorQQItsONAx";function C(a,e){if(Y)console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(a){case"log":case"assert":return}console[a](`[${a}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const p={log(){C("log",arguments)},error(){C("error",arguments)},warn(){C("warn",arguments)},assert(){C("assert",arguments)},trace(){C("trace",arguments)}},u=le.create({baseURL:W,timeout:8e3});class xe{async getKeeps(){const e=await u.get("api/keeps");i.keeps=e.data}async getKeep(e){const o=await u.get("api/keeps/"+e);i.activeKeep=o.data}async createKeep(e){const o=await u.post("api/keeps",e);i.profileKeeps.push(o.data)}async getVaultKeeps(e){const o=await u.get("api/vaults/"+e+"/keeps");i.activeVaultKeeps=o.data}async getVaultKeepsByActive(e){const o=await u.get("api/vaults/"+e+"/keeps");i.activeVaultKeeps=o.data}async deleteKeep(e){await u.delete("api/keeps/"+e),i.keeps=i.keeps.filter(o=>o.id!=e),i.profileKeeps=i.profileKeeps.filter(o=>o.id!=e)}}const T=new xe;class m{static async confirm(e="Are you sure?",o="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await U.fire({title:e,text:o,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",t="top-end",r=3e3,l=!0){U.fire({title:e,icon:o,position:t,timer:r,timerProgressBar:l,toast:!0,showConfirmButton:!1})}static error(e){var o;if(e.isAxiosError){const{response:t}=e;this.toast(((o=t.data.error)==null?void 0:o.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}var f=(a,e)=>{for(const[o,t]of e)a[o]=t;return a};const Ie={setup(){const a=j({});return{editable:a,modalClose(){a.value={}},async addKeep(){try{T.createKeep(a.value),b.getOrCreateInstance(document.getElementById("keep-form")).hide(),a.value={},m.toast("Keep added!","success")}catch(e){p.error(e),m.toast(e.message,"error")}}}}},Ce={class:"container-fluid"},Te={class:"row justify-content-center"},Ae={class:"col-md-6 offset-md-3 p-5"},Pe=s("div",{class:"text-center border-bottom border-3 mb-5"},[s("h3",null,"Add a Keep")],-1),Se={class:"form-floating mb-3"},Ee=s("label",{for:"floatingInput1"},"Keep Name",-1),Oe={class:"form-floating mb-3"},$e=s("label",{for:"floatingInput2"},"Img Url",-1),je={class:"form-floating"},Me=s("label",{for:"floatingTextarea1"},"Description",-1),Ne={class:"text-center pt-3"},Le=s("button",{type:"submit",class:"btn btn-primary mx-2"},"Submit",-1);function qe(a,e,o,t,r,l){return c(),d("div",Ce,[s("button",{onClick:e[0]||(e[0]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn-close btn btn-light bg-light position-absolute top-0 end-0 p-3","data-bs-dismiss":"modal","aria-label":"Close"}),s("div",Te,[s("form",{onSubmit:e[5]||(e[5]=S((...n)=>t.addKeep&&t.addKeep(...n),["prevent"]))},[s("div",Ae,[Pe,s("div",Se,[y(s("input",{type:"text",class:"form-control",id:"floatingInput1",placeholder:"Keep name...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.name=n),maxlength:"20",required:""},null,512),[[x,t.editable.name]]),Ee]),s("div",Oe,[y(s("input",{type:"text",class:"form-control",id:"floatingInput2",placeholder:"Img url...","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.img=n),required:""},null,512),[[x,t.editable.img]]),$e]),s("div",je,[y(s("textarea",{class:"form-control",placeholder:"Keep description...",id:"floatingTextarea1","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.description=n),required:""},null,512),[[x,t.editable.description]]),Me]),s("div",Ne,[s("button",{onClick:e[4]||(e[4]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn btn-danger mx-2","data-bs-dismiss":"modal"}," Cancel "),Le])])],32)])])}var Q=f(Ie,[["render",qe]]),De=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Q});class Be{async getVault(e){const o=await u.get("api/vaults/"+e);i.activeVault=o.data}async getMyVaults(){const e=await u.get("account/vaults");i.myVaults=e.data}async getMyVaultKeeps(){const e=await u.get("account/vaultkeeps");i.myVaultKeeps=e.data}async createVault(e){const o=await u.post("api/vaults",e);i.myVaults.push(o.data)}async addKeepToVault(e){const o=await u.post("api/vaultkeeps",e);let t=i.myVaults.find(r=>r.id==e.vaultId);t.isKept=!0,p.log("Add keep to vault",o.data)}async deleteVaultKeep(e){await u.delete("api/vaultkeeps/"+e),i.activeVaultKeeps=i.activeVaultKeeps.filter(o=>o.vaultKeepId!=e)}async deleteVault(e){await u.delete("api/vaults/"+e),i.myVaults=i.myVaults.filter(o=>o.id!=e)}}const V=new Be,Re={setup(){const a=j({isPrivate:!1});return{editable:a,modalClose(){a.value={}},async addVault(){try{V.createVault(a.value),b.getOrCreateInstance(document.getElementById("vault-form")).hide(),a.value={isPrivate:!1},m.toast("Vault added!","success")}catch(e){p.error(e),m.toast(e.message,"error")}}}}},Ue={class:"container-fluid"},ze={class:"row justify-content-center"},He={class:"col-md-6 offset-md-3 p-5"},Fe=s("div",{class:"text-center border-bottom border-3 mb-5"},[s("h3",null,"Add a Vault")],-1),Ye={class:"form-floating mb-3"},We=s("label",{for:"floatingInput4"},"Vault Name",-1),Qe={class:"form-floating mb-3"},Ge=s("label",{for:"floatingInput5"},"Img Url",-1),Ze={class:"form-floating"},Xe=s("label",{for:"floatingTextarea2"},"Description",-1),Je={class:"d-flex justify-content-center pt-3"},et={class:"form-check form-switch"},tt={class:"form-check-label",for:"flexSwitchCheckDefault"},ot={key:0},at={key:1},st={class:"text-center pt-3"},nt=s("button",{type:"submit",class:"btn btn-primary mx-2"},"Submit",-1);function rt(a,e,o,t,r,l){return c(),d("div",Ue,[s("button",{onClick:e[0]||(e[0]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn-close btn btn-light bg-light position-absolute top-0 end-0 p-3","data-bs-dismiss":"modal","aria-label":"Close"}),s("div",ze,[s("form",{onSubmit:e[6]||(e[6]=S((...n)=>t.addVault&&t.addVault(...n),["prevent"]))},[s("div",He,[Fe,s("div",Ye,[y(s("input",{type:"text",class:"form-control",id:"floatingInput4",placeholder:"Keep name...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.name=n),required:""},null,512),[[x,t.editable.name]]),We]),s("div",Qe,[y(s("input",{type:"text",class:"form-control",id:"floatingInput5",placeholder:"Img url...","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.img=n),required:""},null,512),[[x,t.editable.img]]),Ge]),s("div",Ze,[y(s("textarea",{class:"form-control",placeholder:"Keep description...",id:"floatingTextarea2","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.description=n),required:""},null,512),[[x,t.editable.description]]),Xe]),s("div",Je,[s("div",et,[y(s("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[4]||(e[4]=n=>t.editable.isPrivate=n)},null,512),[[ce,t.editable.isPrivate]]),s("label",tt,[t.editable.isPrivate==!1?(c(),d("span",ot,"Public Vault")):(c(),d("span",at,"Private Vault"))])])]),s("div",st,[s("button",{onClick:e[5]||(e[5]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn btn-danger mx-2","data-bs-dismiss":"modal"}," Cancel "),nt])])],32)])])}var G=f(Re,[["render",rt]]),it=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});const lt={name:"App",setup(){return{appState:v(()=>i),keep:v(()=>i.activeKeep)}},components:{KeepForm:Q,VaultForm:G}};function ct(a,e,o,t,r,l){const n=k("Navbar"),I=k("router-view"),O=k("ActiveKeep"),$=k("Modal"),ee=k("KeepForm"),te=k("VaultForm");return c(),d(z,null,[s("header",null,[h(n)]),s("main",null,[h(I),h($,{id:"active-keep"},{body:E(()=>[t.keep.id?(c(),de(O,{key:0})):w("",!0)]),_:1}),h($,{id:"keep-form"},{body:E(()=>[h(ee)]),_:1}),h($,{id:"vault-form"},{body:E(()=>[h(te)]),_:1})])],64)}var dt=f(lt,[["render",ct]]);const ut="modulepreload",Z={},pt="/",A=function(e,o){return!o||o.length===0?e():Promise.all(o.map(t=>{if(t=`${pt}${t}`,t in Z)return;Z[t]=!0;const r=t.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":ut,r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r)return new Promise((I,O)=>{n.addEventListener("load",I),n.addEventListener("error",O)})})).then(()=>e())};function mt(a){switch(a){case"./pages/AboutPage.vue":return A(()=>import("./AboutPage.b0275709.js"),["assets/AboutPage.b0275709.js","assets/vendor.91a0a055.js"]);case"./pages/AccountPage.vue":return A(()=>import("./AccountPage.2e8b4c10.js"),["assets/AccountPage.2e8b4c10.js","assets/AccountPage.1d38451d.css","assets/vendor.91a0a055.js"]);case"./pages/HomePage.vue":return A(()=>import("./HomePage.0cc4bd7b.js"),["assets/HomePage.0cc4bd7b.js","assets/HomePage.4b719dff.css","assets/vendor.91a0a055.js"]);case"./pages/ProfilePage.vue":return A(()=>import("./ProfilePage.2851fd2d.js"),["assets/ProfilePage.2851fd2d.js","assets/ProfilePage.98770be0.css","assets/vendor.91a0a055.js"]);case"./pages/VaultPage.vue":return A(()=>import("./VaultPage.5b22a421.js"),["assets/VaultPage.5b22a421.js","assets/VaultPage.f947d68d.css","assets/vendor.91a0a055.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+a)))})}}function P(a){return()=>mt(`./pages/${a}.vue`)}const _t=[{path:"/",name:"Home",component:P("HomePage")},{path:"/about",name:"About",component:P("AboutPage")},{path:"/account",name:"Account",component:P("AccountPage"),beforeEnter:me},{path:"/profile/:id",name:"Profile",component:P("ProfilePage"),beforeEnter:H},{path:"/vault/:id",name:"Vault",component:P("VaultPage"),beforeEnter:H}],K=ue({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:pe(),routes:_t});const gt={setup(){const a=j({vaultId:"Add to Vault"});function e(){p.log("filter vaultkeeps ran"),i.myVaults=i.myVaults.map(r=>R(B({},r),{isKept:!1}));let o=i.myVaults;i.myVaultKeeps.filter(r=>r.keepId===i.activeKeep.id).forEach(r=>{let l=o.find(n=>n.id==r.vaultId);l&&(l.isKept=!0)})}return _e(()=>{e()}),{addToVault:a,keep:v(()=>i.activeKeep),vaults:v(()=>i.myVaults),account:v(()=>i.account),vault:v(()=>i.activeVault),myVaultKeeps:v(()=>i.myVaultKeeps),async deleteKeep(o){try{await m.confirm("Are you sure you want to delete this keep "+this.keep.name+"?")&&(await T.deleteKeep(o),b.getOrCreateInstance(document.getElementById("active-keep")).hide(),m.toast("Keep deleted","success"))}catch(t){p.error(t),m.toast(t.message,"error")}},async deleteVaultKeep(o){try{await m.confirm("Are you sure you want to remove this keep, "+this.keep.name+" from this vault?","You wont be able to revert this!","Yes, remove it!")&&(await V.deleteVaultKeep(this.keep.vaultKeepId),b.getOrCreateInstance(document.getElementById("active-keep")).hide(),m.toast("Keep removed from vault","success"),this.keep.kept--)}catch(t){p.error(t),m.toast(t.message,"error")}},async addKeepToVault(){try{a.value.keepId=this.keep.id;let o=this.vaults.find(t=>t.id==a.value.vaultId);await V.addKeepToVault(a.value),a.value.vaultId="Add to Vault",await V.getMyVaults(),await V.getMyVaultKeeps(),m.toast("Added keep, "+this.keep.name+" to Vault "+o.name,"success"),this.keep.kept++}catch(o){p.error(o),m.toast(o.message,"error")}},modalClose(){a.value={vaultId:"Add to Vault"},i.activeKeep={}},isKept(){},goToProfile(){K.push({name:"Profile",params:{id:this.keep.creatorId}}),b.getOrCreateInstance(document.getElementById("active-keep")).hide()}}}},L=a=>(M("data-v-af9a987c"),a=a(),N(),a),ft={class:"container-fluid"},vt={class:"position-absolute top-0 end-0 p-2"},ht={class:"row"},bt={class:"col-md-6 px-0"},yt=["src","alt"],kt={class:"col-md-6 pt-2 pt-md-5"},wt={class:"d-flex flex-column justify-content-between h-100 right-side"},Vt={class:"d-flex flex-column justify-content-between"},Kt={class:""},xt={class:"d-flex justify-content-center align-items-center fs-4"},It=L(()=>s("i",{class:"mdi mdi-eye px-2 text-primary"},null,-1)),Ct={class:"fs-6"},Tt=L(()=>s("i",{class:"mdi mdi-safe-square-outline px-2 text-primary"},null,-1)),At={class:"fs-6"},Pt={class:"d-flex justify-content-center fs-1 py-2 py-md-5"},St={class:"d-flex justify-content-center border-bottom border-2 border-dark px-3"},Et={class:"pb-2 pb-md-5"},Ot={key:0,class:"d-flex justify-content-center pt-4"},$t={class:"border border-1 border-dark rounded p-1 m-2"},jt={class:""},Mt={class:"d-flex justify-content-between flex-column flex-md-row pb-3 px-0 align-items-center"},Nt={class:"py-4 py-md-0"},Lt={class:"d-flex"},qt=L(()=>s("option",{selected:""},"Add to Vault",-1)),Dt=["value","disabled"],Bt={class:"btn btn-danger ms-2"},Rt=["src","alt"],Ut={class:"ps-1"};function zt(a,e,o,t,r,l){return c(),d("div",ft,[s("div",vt,[s("button",{onClick:e[0]||(e[0]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn-close btn btn-light bg-light","data-bs-dismiss":"modal","aria-label":"Close"})]),s("div",ht,[s("div",bt,[s("img",{class:"left-side modal-round",src:t.keep.img,alt:t.keep.img},null,8,yt)]),s("div",kt,[s("div",wt,[s("div",null,[s("div",Vt,[s("div",Kt,[s("div",xt,[It,s("span",Ct,_(t.keep.views),1),Tt,s("span",At,_(t.keep.kept),1)]),s("div",Pt,_(t.keep.name),1),s("div",St,[s("p",Et,_(t.keep.description),1)]),t.keep.tags?(c(),d("div",Ot,[s("div",$t,[s("span",jt,_(a.t),1)])])):w("",!0)])])]),s("div",Mt,[s("div",Nt,[s("div",Lt,[!t.keep.vaultKeepId&&t.account.id?y((c(),d("select",{key:0,"onUpdate:modelValue":e[1]||(e[1]=n=>t.addToVault.vaultId=n),onChange:e[2]||(e[2]=(...n)=>t.addKeepToVault&&t.addKeepToVault(...n)),class:"form-select","aria-label":"Select Vault"},[qt,(c(!0),d(z,null,fe(t.vaults,n=>(c(),d("option",{key:n.id,value:n.id,disabled:n.isKept==!0},_(n.name)+" "+_(n.isKept?" (Already added)":""),9,Dt))),128))],544)),[[ge,t.addToVault.vaultId]]):w("",!0),s("button",Bt,[t.keep.creatorId==t.account.id&&!t.keep.vaultKeepId?(c(),d("i",{key:0,onClick:e[3]||(e[3]=n=>t.deleteKeep(t.keep.id)),class:"mdi mdi-trash-can fs-6",title:"Delete the Keep"})):w("",!0)])]),t.keep.vaultKeepId&&t.account.id==t.vault.creatorId?(c(),d("button",{key:0,type:"button",onClick:e[4]||(e[4]=(...n)=>t.deleteVaultKeep&&t.deleteVaultKeep(...n)),class:"btn btn-danger"}," Remove from Vault ")):w("",!0)]),s("div",{onClick:e[5]||(e[5]=(...n)=>t.goToProfile&&t.goToProfile(...n)),class:"selectable"},[s("img",{class:"profile-img",src:t.keep.creator.picture,alt:t.keep.creator.picture},null,8,Rt),s("span",Ut,_(t.keep.creator.name),1)])])])])])])}var Ht=f(gt,[["render",zt],["__scopeId","data-v-af9a987c"]]),Ft=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ht});const Yt={props:{keep:{type:Object,required:!0}},setup(a){return{async activeKeep(e){await T.getKeep(e),a.keep.vaultKeepId&&(i.activeKeep.vaultKeepId=a.keep.vaultKeepId),b.getOrCreateInstance(document.getElementById("active-keep")).show()},goToProfile(){K.push({name:"Profile",params:{id:a.keep.creatorId}})}}}},Wt=["src","alt"],Qt={key:0,class:"text my-2 mx-2 p-1 px-2 fs-6"},Gt={key:1,class:"text my-2 mx-2 p-1 px-2"},Zt=["src"];function Xt(a,e,o,t,r,l){return c(),d("div",{onClick:e[1]||(e[1]=n=>t.activeKeep(o.keep.id)),class:"elevation-2 rounded selectable grow wrapper text-white text-shadow gradient fs-3",style:F(`background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0.85) ), url('${o.keep.img}'); background-size: cover; overflow: hidden;`)},[s("img",{class:"img-fluid card-img",src:o.keep.img,alt:o.keep.img},null,8,Wt),a.$route.name=="Profile"?(c(),d("div",Qt,[s("span",null,_(o.keep.name),1)])):(c(),d("div",Gt,[s("span",null,_(o.keep.name),1)])),a.$route.name!=="Profile"?(c(),d("img",{key:2,onClick:e[0]||(e[0]=S((...n)=>t.goToProfile&&t.goToProfile(...n),["stop"])),title:"Navigate to Profile",class:"profile-img mt-2 mx-2 elevation-2 selectable grow-2",src:o.keep.creator.picture,alt:""},null,8,Zt)):w("",!0)],4)}var Jt=f(Yt,[["render",Xt],["__scopeId","data-v-7d0ae70c"]]),eo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Jt});class to{async getAccount(){try{const e=await u.get("/account");i.account=e.data}catch(e){p.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const oo=new to,ao={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class so{constructor(e=!1,o=W){}on(e,o){var t;return(t=this.socket)==null||t.on(e,o.bind(this)),this}onConnected(e){p.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){p.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(ao.authenticate,e)}onError(e){p.error("[SOCKET_ERROR]",e)}enqueue(e,o){p.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){p.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class no extends so{constructor(){super();this.on("error",this.onError)}onError(e){m.toast(e.message,"error")}}const X=new no,g=ve({domain:we,clientId:Ke,audience:Ve,useRefreshTokens:!0,onRedirectCallback:a=>{K.push(a&&a.targetUrl?a.targetUrl:window.location.pathname)}});g.on(g.AUTH_EVENTS.AUTHENTICATED,async function(){u.defaults.headers.authorization=g.bearer,u.interceptors.request.use(ro),i.user=g.user,await oo.getAccount(),X.authenticate(g.bearer);try{await V.getMyVaults(),await V.getMyVaultKeeps()}catch(a){p.error(a),m.toast(a.message,"error")}});async function ro(a){if(!g.isAuthenticated)return a;const e=g.identity.exp*1e3,o=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return o?await g.loginWithPopup():t&&(await g.getTokenSilently(),u.defaults.headers.authorization=g.bearer,X.authenticate(g.bearer)),a}const io={setup(){return{user:v(()=>i.user),account:v(()=>i.account),async login(){g.loginWithPopup()},async logout(){g.logout({returnTo:window.location.origin})},goToProfile(){K.push({name:"Profile",params:{id:this.account.id}}),p.log("what?")}}}},lo=a=>(M("data-v-4a193d84"),a=a(),N(),a),co={class:"navbar-text"},uo={key:1,class:"dropdown my-2 my-lg-0"},po={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown",id:"authDropdown"},mo={key:0,class:"rounded mx-3 login-bg"},_o=["src"],go={class:"mx-3 text-white lighten-30 name-hide",title:"Account menu"},fo={class:"dropdown-menu p-0 list-group w-100"},vo=lo(()=>s("i",{class:"mdi mdi-logout"},null,-1)),ho=he(" logout "),bo=[vo,ho];function yo(a,e,o,t,r,l){return c(),d("span",co,[t.user.isAuthenticated?(c(),d("div",uo,[s("div",po,[t.account.picture?(c(),d("div",mo,[s("img",{src:t.account.picture,class:"",alt:"account photo",height:"40",title:"Account menu"},null,8,_o),s("span",go,_(t.account.name),1)])):w("",!0)]),s("div",fo,[s("div",{onClick:e[1]||(e[1]=(...n)=>t.goToProfile&&t.goToProfile(...n)),class:"list-group-item list-group-item-action hoverable"}," My Profile "),s("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[2]||(e[2]=(...n)=>t.logout&&t.logout(...n))},bo)])])):(c(),d("button",{key:0,class:"btn selectable text-white mx-2 lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...n)=>t.login&&t.login(...n))}," Login "))])}var ko=f(io,[["render",yo],["__scopeId","data-v-4a193d84"]]),wo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:ko});const Vo={},Ko={class:"modal fade modal-open",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},xo={class:"modal-fade modal-dialog modal-dialog-centered modal-xl",role:"document"},Io={class:"modal-content border-0"},Co={class:"modal-body p-0"};function To(a,e,o,t,r,l){return c(),d("div",Ko,[s("div",xo,[s("div",Io,[s("div",Co,[be(a.$slots,"body")])])])])}var Ao=f(Vo,[["render",To]]),Po=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Ao}),So="/assets/logo-white.3c9672cc.png";const Eo={setup(){return{}}},Oo=a=>(M("data-v-42d88e8d"),a=a(),N(),a),$o={class:"bg-primary d-flex flex-column flex-md-row justify-content-between align-items-end align-items-md-center elevation-2"},jo=Oo(()=>s("img",{class:"img-fluid header-img p-3",src:So,alt:"",title:"Home",name:"Home"},null,-1));function Mo(a,e,o,t,r,l){const n=k("router-link"),I=k("Login");return c(),d("div",$o,[h(n,{to:{name:"Home"},title:"Home",name:"Home"},{default:E(()=>[jo]),_:1}),h(I)])}var No=f(Eo,[["render",Mo],["__scopeId","data-v-42d88e8d"]]),Lo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:No});const qo={props:{vault:{type:Object,required:!0}},setup(a){return{async activeVault(e){await T.getKeep(e),b.getOrCreateInstance(document.getElementById("active-keep")).show()},goToVault(){K.push({name:"Vault",params:{id:a.vault.id}})}}}},Do=["src","alt"],Bo={class:"text my-2 mx-2 p-1 px-2"};function Ro(a,e,o,t,r,l){return c(),d("div",{onClick:e[0]||(e[0]=(...n)=>t.goToVault&&t.goToVault(...n)),class:"elevation-2 rounded selectable grow wrapper text-white text-shadow fs-6",style:F(`background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0.85) ), url('${o.vault.img}'); background-size: cover; overflow: hidden;`)},[s("img",{class:"img-fluid rounded card-img",src:o.vault.img,alt:o.vault.img},null,8,Do),s("div",Bo,[s("span",null,_(o.vault.name),1)])],4)}var Uo=f(qo,[["render",Ro],["__scopeId","data-v-4fb07c60"]]),zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Uo});const Ho={props:{keep:{type:Object,required:!0}},setup(a){return{async activeVaultKeep(e){await T.getKeep(e),i.activeKeep.vaultKeepId=a.keep.vaultKeepId,b.getOrCreateInstance(document.getElementById("active-keep")).show()},goToProfile(){K.push({name:"Profile",params:{id:a.keep.creatorId}})}}}},Fo=["src","alt"],Yo={class:"text my-3 mx-2 p-1 px-2 bg-grey elevation-2 rounded"},Wo=["src"];function Qo(a,e,o,t,r,l){return c(),d("div",{onClick:e[1]||(e[1]=n=>t.activeVaultKeep(o.keep.id)),class:"elevation-2 rounded selectable grow card-img wrapper text-white text-shadow fs-3"},[s("img",{class:"img-fluid rounded",src:o.keep.img,alt:o.keep.img},null,8,Fo),s("div",Yo,[s("span",null,_(o.keep.name),1)]),s("img",{onClick:e[0]||(e[0]=S((...n)=>t.goToProfile&&t.goToProfile(...n),["stop"])),class:"profile-img mb-3 mx-2 elevation-2 selectable grow-2",src:o.keep.creator.picture,alt:""},null,8,Wo)])}var Go=f(Ho,[["render",Qo]]),Zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Go});function Xo(a){Object.entries({"./components/ActiveKeep.vue":Ft,"./components/Keep.vue":eo,"./components/KeepForm.vue":De,"./components/Login.vue":wo,"./components/Modal.vue":Po,"./components/Navbar.vue":Lo,"./components/Vault.vue":zo,"./components/VaultForm.vue":it,"./components/VaultKeep.vue":Zo}).forEach(([o,t])=>{const r=t.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");a.component(r,t.default)})}const J=ye(dt);Xo(J);J.use(K).mount("#app");export{i as A,m as P,f as _,u as a,T as k,p as l,K as r,V as v};
