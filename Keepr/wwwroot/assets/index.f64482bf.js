var ae=Object.defineProperty,se=Object.defineProperties;var ne=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var re=Object.prototype.hasOwnProperty,ie=Object.prototype.propertyIsEnumerable;var D=(s,e,o)=>e in s?ae(s,e,{enumerable:!0,configurable:!0,writable:!0,value:o}):s[e]=o,B=(s,e)=>{for(var o in e||(e={}))re.call(e,o)&&D(s,o,e[o]);if(q)for(var o of q(e))ie.call(e,o)&&D(s,o,e[o]);return s},R=(s,e)=>se(s,ne(e));import{r as le,a as ce,S as U,b as M,M as b,o as c,c as d,d as a,w as E,e as y,v as K,f as de,g as v,h as k,i as h,j as O,F as z,k as ue,l as x,m as pe,n as me,p as _e,q as H,s as ge,t as _,u as fe,x as ve,y as L,z as N,A as F,B as Y,C as he,D as be,E as ye}from"./vendor.c9635540.js";const ke=function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))t(r);new MutationObserver(r=>{for(const l of r)if(l.type==="childList")for(const n of l.addedNodes)n.tagName==="LINK"&&n.rel==="modulepreload"&&t(n)}).observe(document,{childList:!0,subtree:!0});function o(r){const l={};return r.integrity&&(l.integrity=r.integrity),r.referrerpolicy&&(l.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?l.credentials="include":r.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function t(r){if(r.ep)return;r.ep=!0;const l=o(r);fetch(r.href,l)}};ke();const i=le({user:{},account:{},profile:{},profileKeeps:[],profileVaults:[],keeps:[],activeKeep:{},activeVault:{},activeVaultKeeps:[],activeVaultKeep:{},myVaults:[],myVaultKeeps:[]}),W=window.location.origin.includes("localhost"),Q=W?"https://localhost:5001":"",we="dev-in-9pjrc.us.auth0.com",xe="https://patrickdev.com",Ve="KCkMZ4ZIRzme4LvLXEQoEorQQItsONAx";function T(s,e){if(W)console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e);else{switch(s){case"log":case"assert":return}console[s](`[${s}] :: ${new Date().toLocaleTimeString()} :: `,...e)}}const p={log(){T("log",arguments)},error(){T("error",arguments)},warn(){T("warn",arguments)},assert(){T("assert",arguments)},trace(){T("trace",arguments)}},u=ce.create({baseURL:Q,timeout:8e3});class Ke{async getKeeps(){const e=await u.get("api/keeps");i.keeps=e.data}async getKeep(e){const o=await u.get("api/keeps/"+e);i.activeKeep=o.data}async createKeep(e){const o=await u.post("api/keeps",e);i.profileKeeps.push(o.data)}async getVaultKeeps(e){const o=await u.get("api/vaults/"+e+"/keeps");i.activeVaultKeeps=o.data}async getVaultKeepsByActive(e){const o=await u.get("api/vaults/"+e+"/keeps");i.activeVaultKeeps=o.data}async deleteKeep(e){await u.delete("api/keeps/"+e),i.keeps=i.keeps.filter(o=>o.id!=e),i.profileKeeps=i.profileKeeps.filter(o=>o.id!=e)}}const A=new Ke;class m{static async confirm(e="Are you sure?",o="You won't be able to revert this!",t="warning",r="Yes, delete it!"){try{return!!(await U.fire({title:e,text:o,icon:t,showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33",confirmButtonText:r})).isConfirmed}catch{return!1}}static toast(e="Warning!",o="warning",t="top-end",r=3e3,l=!0){U.fire({title:e,icon:o,position:t,timer:r,timerProgressBar:l,toast:!0,showConfirmButton:!1})}static error(e){var o;if(e.isAxiosError){const{response:t}=e;this.toast(((o=t.data.error)==null?void 0:o.message)||t.data.message,"error")}else this.toast(e.message||e,"error")}static success(e="Success!"){this.toast(e,"success")}}var f=(s,e)=>{for(const[o,t]of e)s[o]=t;return s};const Ie={setup(){const s=M({});return{editable:s,modalClose(){s.value={}},async addKeep(){try{A.createKeep(s.value),b.getOrCreateInstance(document.getElementById("keep-form")).hide(),s.value={},m.toast("Keep added!","success")}catch(e){p.error(e),m.toast(e.message,"error")}}}}},Ce={class:"container-fluid"},Te={class:"row justify-content-center"},Ae={class:"col-md-6 offset-md-3 p-5"},Pe=a("div",{class:"text-center border-bottom border-3 mb-5"},[a("h3",null,"Add a Keep")],-1),Se={class:"form-floating mb-3"},Ee=a("label",{for:"floatingInput1"},"Keep Name",-1),Oe={class:"form-floating mb-3"},$e=a("label",{for:"floatingInput2"},"Img Url",-1),je={class:"form-floating"},Me=a("label",{for:"floatingTextarea1"},"Description",-1),Le={class:"text-center pt-3"},Ne=a("button",{type:"submit",class:"btn btn-primary mx-2"},"Submit",-1);function qe(s,e,o,t,r,l){return c(),d("div",Ce,[a("button",{onClick:e[0]||(e[0]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn-close btn btn-light bg-light position-absolute top-0 end-0 p-3","data-bs-dismiss":"modal","aria-label":"Close"}),a("div",Te,[a("form",{onSubmit:e[5]||(e[5]=E((...n)=>t.addKeep&&t.addKeep(...n),["prevent"]))},[a("div",Ae,[Pe,a("div",Se,[y(a("input",{type:"text",class:"form-control",id:"floatingInput1",placeholder:"Keep name...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.name=n),maxlength:"20",required:""},null,512),[[K,t.editable.name]]),Ee]),a("div",Oe,[y(a("input",{type:"text",class:"form-control",id:"floatingInput2",placeholder:"Img url...","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.img=n),required:""},null,512),[[K,t.editable.img]]),$e]),a("div",je,[y(a("textarea",{class:"form-control",placeholder:"Keep description...",id:"floatingTextarea1","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.description=n),required:""},null,512),[[K,t.editable.description]]),Me]),a("div",Le,[a("button",{onClick:e[4]||(e[4]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn btn-danger mx-2","data-bs-dismiss":"modal"}," Cancel "),Ne])])],32)])])}var G=f(Ie,[["render",qe]]),De=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:G});class Be{async getVault(e){const o=await u.get("api/vaults/"+e);i.activeVault=o.data}async getMyVaults(){const e=await u.get("account/vaults");i.myVaults=e.data}async getMyVaultKeeps(){const e=await u.get("account/vaultkeeps");i.myVaultKeeps=e.data}async createVault(e){const o=await u.post("api/vaults",e);i.myVaults.push(o.data)}async addKeepToVault(e){const o=await u.post("api/vaultkeeps",e);let t=i.myVaults.find(r=>r.id==e.vaultId);t.isKept=!0,p.log("Add keep to vault",o.data)}async deleteVaultKeep(e){await u.delete("api/vaultkeeps/"+e),i.activeVaultKeeps=i.activeVaultKeeps.filter(o=>o.vaultKeepId!=e)}async deleteVault(e){await u.delete("api/vaults/"+e),i.myVaults=i.myVaults.filter(o=>o.id!=e)}}const w=new Be,Re={setup(){const s=M({isPrivate:!1});return{editable:s,modalClose(){s.value={}},async addVault(){try{w.createVault(s.value),b.getOrCreateInstance(document.getElementById("vault-form")).hide(),s.value={isPrivate:!1},m.toast("Vault added!","success")}catch(e){p.error(e),m.toast(e.message,"error")}}}}},Ue={class:"container-fluid"},ze={class:"row justify-content-center"},He={class:"col-md-6 offset-md-3 p-5"},Fe=a("div",{class:"text-center border-bottom border-3 mb-5"},[a("h3",null,"Add a Vault")],-1),Ye={class:"form-floating mb-3"},We=a("label",{for:"floatingInput4"},"Vault Name",-1),Qe={class:"form-floating mb-3"},Ge=a("label",{for:"floatingInput5"},"Img Url",-1),Ze={class:"form-floating"},Xe=a("label",{for:"floatingTextarea2"},"Description",-1),Je={class:"d-flex justify-content-center pt-3"},et={class:"form-check form-switch"},tt={class:"form-check-label",for:"flexSwitchCheckDefault"},ot={key:0},at={key:1},st={class:"text-center pt-3"},nt=a("button",{type:"submit",class:"btn btn-primary mx-2"},"Submit",-1);function rt(s,e,o,t,r,l){return c(),d("div",Ue,[a("button",{onClick:e[0]||(e[0]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn-close btn btn-light bg-light position-absolute top-0 end-0 p-3","data-bs-dismiss":"modal","aria-label":"Close"}),a("div",ze,[a("form",{onSubmit:e[6]||(e[6]=E((...n)=>t.addVault&&t.addVault(...n),["prevent"]))},[a("div",He,[Fe,a("div",Ye,[y(a("input",{type:"text",class:"form-control",id:"floatingInput4",placeholder:"Keep name...","onUpdate:modelValue":e[1]||(e[1]=n=>t.editable.name=n),required:""},null,512),[[K,t.editable.name]]),We]),a("div",Qe,[y(a("input",{type:"text",class:"form-control",id:"floatingInput5",placeholder:"Img url...","onUpdate:modelValue":e[2]||(e[2]=n=>t.editable.img=n),required:""},null,512),[[K,t.editable.img]]),Ge]),a("div",Ze,[y(a("textarea",{class:"form-control",placeholder:"Keep description...",id:"floatingTextarea2","onUpdate:modelValue":e[3]||(e[3]=n=>t.editable.description=n),required:""},null,512),[[K,t.editable.description]]),Xe]),a("div",Je,[a("div",et,[y(a("input",{class:"form-check-input",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault","onUpdate:modelValue":e[4]||(e[4]=n=>t.editable.isPrivate=n)},null,512),[[de,t.editable.isPrivate]]),a("label",tt,[t.editable.isPrivate==!1?(c(),d("span",ot,"Public Vault")):(c(),d("span",at,"Private Vault"))])])]),a("div",st,[a("button",{onClick:e[5]||(e[5]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn btn-danger mx-2","data-bs-dismiss":"modal"}," Cancel "),nt])])],32)])])}var Z=f(Re,[["render",rt]]),it=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Z});const lt={name:"App",setup(){return{appState:v(()=>i),keep:v(()=>i.activeKeep)}},components:{KeepForm:G,VaultForm:Z}};function ct(s,e,o,t,r,l){const n=k("Navbar"),C=k("router-view"),$=k("ActiveKeep"),j=k("Modal"),te=k("KeepForm"),oe=k("VaultForm");return c(),d(z,null,[a("header",null,[h(n)]),a("main",null,[h(C),h(j,{id:"active-keep"},{body:O(()=>[t.keep.id?(c(),ue($,{key:0})):x("",!0)]),_:1}),h(j,{id:"keep-form"},{body:O(()=>[h(te)]),_:1}),h(j,{id:"vault-form"},{body:O(()=>[h(oe)]),_:1})])],64)}var dt=f(lt,[["render",ct]]);const ut="modulepreload",X={},pt="/",P=function(e,o){return!o||o.length===0?e():Promise.all(o.map(t=>{if(t=`${pt}${t}`,t in X)return;X[t]=!0;const r=t.endsWith(".css"),l=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${t}"]${l}`))return;const n=document.createElement("link");if(n.rel=r?"stylesheet":ut,r||(n.as="script",n.crossOrigin=""),n.href=t,document.head.appendChild(n),r)return new Promise((C,$)=>{n.addEventListener("load",C),n.addEventListener("error",$)})})).then(()=>e())};function mt(s){switch(s){case"./pages/AboutPage.vue":return P(()=>import("./AboutPage.1fdf51c9.js"),["assets/AboutPage.1fdf51c9.js","assets/vendor.c9635540.js"]);case"./pages/AccountPage.vue":return P(()=>import("./AccountPage.aa345b52.js"),["assets/AccountPage.aa345b52.js","assets/AccountPage.1d38451d.css","assets/vendor.c9635540.js"]);case"./pages/HomePage.vue":return P(()=>import("./HomePage.84d6d209.js"),["assets/HomePage.84d6d209.js","assets/HomePage.4b719dff.css","assets/vendor.c9635540.js"]);case"./pages/ProfilePage.vue":return P(()=>import("./ProfilePage.42b4e585.js"),["assets/ProfilePage.42b4e585.js","assets/ProfilePage.98770be0.css","assets/vendor.c9635540.js"]);case"./pages/VaultPage.vue":return P(()=>import("./VaultPage.1c568d1e.js"),["assets/VaultPage.1c568d1e.js","assets/VaultPage.f947d68d.css","assets/vendor.c9635540.js"]);default:return new Promise(function(e,o){(typeof queueMicrotask=="function"?queueMicrotask:setTimeout)(o.bind(null,new Error("Unknown variable dynamic import: "+s)))})}}function S(s){return()=>mt(`./pages/${s}.vue`)}const _t=[{path:"/",name:"Home",component:S("HomePage")},{path:"/about",name:"About",component:S("AboutPage")},{path:"/account",name:"Account",component:S("AccountPage"),beforeEnter:_e},{path:"/profile/:id",name:"Profile",component:S("ProfilePage"),beforeEnter:H},{path:"/vault/:id",name:"Vault",component:S("VaultPage"),beforeEnter:H}],V=pe({linkActiveClass:"router-link-active",linkExactActiveClass:"router-link-exact-active",history:me(),routes:_t});const gt={setup(){const s=M({vaultId:"Add to Vault"});function e(){p.log("filter vaultkeeps ran"),i.myVaults=i.myVaults.map(r=>R(B({},r),{isKept:!1}));let o=i.myVaults;i.myVaultKeeps.filter(r=>r.keepId===i.activeKeep.id).forEach(r=>{let l=o.find(n=>n.id==r.vaultId);l&&(l.isKept=!0)})}return ge(()=>{e()}),{addToVault:s,keep:v(()=>i.activeKeep),vaults:v(()=>i.myVaults),account:v(()=>i.account),vault:v(()=>i.activeVault),myVaultKeeps:v(()=>i.myVaultKeeps),async deleteKeep(o){try{await m.confirm("Are you sure you want to delete this keep "+this.keep.name+"?")&&(await A.deleteKeep(o),b.getOrCreateInstance(document.getElementById("active-keep")).hide(),m.toast("Keep deleted","success"))}catch(t){p.error(t),m.toast(t.message,"error")}},async deleteVaultKeep(o){try{await m.confirm("Are you sure you want to remove "+this.keep.name+" from this Vault?","You wont be able to revert this!","","Yes, remove it!")&&(await w.deleteVaultKeep(this.keep.vaultKeepId),b.getOrCreateInstance(document.getElementById("active-keep")).hide(),m.toast("Keep removed from vault","success"),this.keep.kept--,await w.getMyVaultKeeps())}catch(t){p.error(t),m.toast(t.message,"error")}},async addKeepToVault(){try{s.value.keepId=this.keep.id;let o=this.vaults.find(t=>t.id==s.value.vaultId);await w.addKeepToVault(s.value),s.value.vaultId="Add to Vault",await w.getMyVaults(),await w.getMyVaultKeeps(),m.toast("Added keep, "+this.keep.name+" to Vault "+o.name,"success"),this.keep.kept++}catch(o){p.error(o),m.toast(o.message,"error")}},modalClose(){s.value={vaultId:"Add to Vault"},i.activeKeep={}},isKept(){},goToProfile(){V.push({name:"Profile",params:{id:this.keep.creatorId}}),b.getOrCreateInstance(document.getElementById("active-keep")).hide()}}}},I=s=>(L("data-v-d4340d20"),s=s(),N(),s),ft={class:"container-fluid"},vt=I(()=>a("div",{class:"position-absolute bottom-0 start-0 p-2"},null,-1)),ht={class:"position-absolute top-0 end-0 p-2 d-flex flex-row"},bt={key:0,class:"dropdown"},yt=I(()=>a("a",{class:"btn",href:"#",role:"button",id:"dropdownMenuLink","data-bs-toggle":"dropdown","aria-expanded":"false"},[a("i",{class:"mdi mdi-dots-horizontal ellipses"})],-1)),kt={class:"dropdown-menu dropdown-menu-end","aria-labelledby":"dropdownMenuLink"},wt=F("Delete"),xt=I(()=>a("i",{class:"mdi mdi-trash-can"},null,-1)),Vt=[wt,xt],Kt={class:"row"},It={class:"col-lg-6 px-0"},Ct=["src","alt"],Tt={class:"col-lg-6 pt-2 pt-lg-5"},At={class:"d-flex flex-column justify-content-between h-100 right-side"},Pt={class:"d-flex flex-column justify-content-between"},St={class:""},Et={class:"d-flex justify-content-center align-items-center fs-4"},Ot=I(()=>a("i",{class:"mdi mdi-eye px-2 text-primary"},null,-1)),$t={class:"fs-6"},jt=I(()=>a("i",{class:"mdi mdi-safe-square-outline px-2 text-primary"},null,-1)),Mt={class:"fs-6"},Lt={class:"d-flex justify-content-center fs-1 py-2 py-lg-5"},Nt={class:"d-flex justify-content-center border-bottom border-2 border-dark px-3"},qt={class:"pb-2 pb-lg-5"},Dt={key:0,class:"d-flex justify-content-center pt-4"},Bt={class:"border border-1 border-dark rounded p-1 m-2"},Rt={class:""},Ut={class:"d-flex justify-content-between flex-column flex-xl-row pb-3 px-0 align-items-center"},zt={class:"py-4 py-xl-0"},Ht={class:"d-flex"},Ft=I(()=>a("option",{selected:""},"Add to Vault",-1)),Yt=["value","disabled"],Wt=["src","alt"],Qt={class:"ps-1"};function Gt(s,e,o,t,r,l){return c(),d("div",ft,[vt,a("div",ht,[t.keep.creatorId==t.account.id&&!t.keep.vaultKeepId?(c(),d("div",bt,[yt,a("ul",kt,[a("li",null,[a("a",{onClick:e[0]||(e[0]=n=>t.deleteKeep(t.keep.id)),class:"dropdown-item text-danger d-flex justify-content-between",href:"#"},Vt)])])])):x("",!0),a("button",{onClick:e[1]||(e[1]=(...n)=>t.modalClose&&t.modalClose(...n)),type:"button",class:"btn-close btn btn-light bg-light mx-2","data-bs-dismiss":"modal","aria-label":"Close"})]),a("div",Kt,[a("div",It,[a("img",{class:"left-side modal-round",src:t.keep.img,alt:t.keep.img},null,8,Ct)]),a("div",Tt,[a("div",At,[a("div",null,[a("div",Pt,[a("div",St,[a("div",Et,[Ot,a("span",$t,_(t.keep.views),1),jt,a("span",Mt,_(t.keep.kept),1)]),a("div",Lt,_(t.keep.name),1),a("div",Nt,[a("p",qt,_(t.keep.description),1)]),t.keep.tags?(c(),d("div",Dt,[a("div",Bt,[a("span",Rt,_(s.t),1)])])):x("",!0)])])]),a("div",Ut,[a("div",zt,[a("div",Ht,[!t.keep.vaultKeepId&&t.account.id?y((c(),d("select",{key:0,"onUpdate:modelValue":e[2]||(e[2]=n=>t.addToVault.vaultId=n),onChange:e[3]||(e[3]=(...n)=>t.addKeepToVault&&t.addKeepToVault(...n)),class:"form-select","aria-label":"Select Vault"},[Ft,(c(!0),d(z,null,ve(t.vaults,n=>(c(),d("option",{key:n.id,value:n.id,disabled:n.isKept==!0},_(n.name)+" "+_(n.isKept?" (Already added)":""),9,Yt))),128))],544)),[[fe,t.addToVault.vaultId]]):x("",!0)]),t.keep.vaultKeepId&&t.account.id==t.vault.creatorId?(c(),d("button",{key:0,type:"button",onClick:e[4]||(e[4]=(...n)=>t.deleteVaultKeep&&t.deleteVaultKeep(...n)),class:"btn btn-danger"}," Remove from Vault ")):x("",!0)]),a("div",{onClick:e[5]||(e[5]=(...n)=>t.goToProfile&&t.goToProfile(...n)),class:"selectable"},[a("img",{class:"profile-img",src:t.keep.creator.picture,alt:t.keep.creator.picture},null,8,Wt),a("span",Qt,_(t.keep.creator.name),1)])])])])])])}var Zt=f(gt,[["render",Gt],["__scopeId","data-v-d4340d20"]]),Xt=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Zt});const Jt={props:{keep:{type:Object,required:!0}},setup(s){return{async activeKeep(e){await A.getKeep(e),s.keep.vaultKeepId&&(i.activeKeep.vaultKeepId=s.keep.vaultKeepId),b.getOrCreateInstance(document.getElementById("active-keep")).show()},goToProfile(){V.push({name:"Profile",params:{id:s.keep.creatorId}})}}}},eo=["src","alt"],to={key:0,class:"text my-2 mx-2 p-1 px-2 fs-6"},oo={key:1,class:"text my-2 mx-2 p-1 px-2"},ao=["src"];function so(s,e,o,t,r,l){return c(),d("div",{onClick:e[1]||(e[1]=n=>t.activeKeep(o.keep.id)),class:"elevation-2 rounded selectable grow wrapper text-white text-shadow gradient fs-3",style:Y(`background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0.85) ), url('${o.keep.img}'); background-size: cover; overflow: hidden;`)},[a("img",{class:"img-fluid card-img",src:o.keep.img,alt:o.keep.img},null,8,eo),s.$route.name=="Profile"?(c(),d("div",to,[a("span",null,_(o.keep.name),1)])):(c(),d("div",oo,[a("span",null,_(o.keep.name),1)])),s.$route.name!=="Profile"?(c(),d("img",{key:2,onClick:e[0]||(e[0]=E((...n)=>t.goToProfile&&t.goToProfile(...n),["stop"])),title:"Navigate to Profile",class:"profile-img mt-2 mx-2 elevation-2 selectable grow-2",src:o.keep.creator.picture,alt:""},null,8,ao)):x("",!0)],4)}var no=f(Jt,[["render",so],["__scopeId","data-v-7d0ae70c"]]),ro=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:no});class io{async getAccount(){try{const e=await u.get("/account");i.account=e.data}catch(e){p.error("HAVE YOU STARTED YOUR SERVER YET???",e)}}}const lo=new io,co={connection:"connection",connected:"connected",disconnect:"disconnect",authenticate:"authenticate",authenticated:"authenticated",userConnected:"userConnected",userDisconnected:"userDisconnected",error:"error"};class uo{constructor(e=!1,o=Q){}on(e,o){var t;return(t=this.socket)==null||t.on(e,o.bind(this)),this}onConnected(e){p.log("[SOCKET_CONNECTION]",e),this.connected=!0,this.playback()}onAuthenticated(e){p.log("[SOCKET_AUTHENTICATED]",e),this.authenticated=!0,this.playback()}authenticate(e){var o;(o=this.socket)==null||o.emit(co.authenticate,e)}onError(e){p.error("[SOCKET_ERROR]",e)}enqueue(e,o){p.log("[ENQUEING_ACTION]",{action:e,payload:o}),this.queue.push({action:e,payload:o})}playback(){p.log("[SOCKET_PLAYBACK]");const e=[...this.queue];this.queue=[],e.forEach(o=>{this.emit(o.action,o.payload)})}emit(e,o=void 0){if(this.requiresAuth&&!this.authenticated)return this.enqueue(e,o);if(!this.connected)return this.enqueue(e,o);this.socket.emit(e,o)}}class po extends uo{constructor(){super();this.on("error",this.onError)}onError(e){m.toast(e.message,"error")}}const J=new po,g=he({domain:we,clientId:Ve,audience:xe,useRefreshTokens:!0,onRedirectCallback:s=>{V.push(s&&s.targetUrl?s.targetUrl:window.location.pathname)}});g.on(g.AUTH_EVENTS.AUTHENTICATED,async function(){u.defaults.headers.authorization=g.bearer,u.interceptors.request.use(mo),i.user=g.user,await lo.getAccount(),J.authenticate(g.bearer);try{await w.getMyVaults(),await w.getMyVaultKeeps()}catch(s){p.error(s),m.toast(s.message,"error")}});async function mo(s){if(!g.isAuthenticated)return s;const e=g.identity.exp*1e3,o=e<Date.now(),t=e<Date.now()+1e3*60*60*12;return o?await g.loginWithPopup():t&&(await g.getTokenSilently(),u.defaults.headers.authorization=g.bearer,J.authenticate(g.bearer)),s}const _o={setup(){return{user:v(()=>i.user),account:v(()=>i.account),async login(){g.loginWithPopup()},async logout(){g.logout({returnTo:window.location.origin})},goToProfile(){V.push({name:"Profile",params:{id:this.account.id}}),p.log("what?")}}}},go=s=>(L("data-v-4a193d84"),s=s(),N(),s),fo={class:"navbar-text"},vo={key:1,class:"dropdown my-2 my-lg-0"},ho={class:"dropdown-toggle selectable","data-bs-toggle":"dropdown",id:"authDropdown"},bo={key:0,class:"rounded mx-3 login-bg"},yo=["src"],ko={class:"mx-3 text-white lighten-30 name-hide",title:"Account menu"},wo={class:"dropdown-menu p-0 list-group w-100"},xo=go(()=>a("i",{class:"mdi mdi-logout"},null,-1)),Vo=F(" logout "),Ko=[xo,Vo];function Io(s,e,o,t,r,l){return c(),d("span",fo,[t.user.isAuthenticated?(c(),d("div",vo,[a("div",ho,[t.account.picture?(c(),d("div",bo,[a("img",{src:t.account.picture,class:"",alt:"account photo",height:"40",title:"Account menu"},null,8,yo),a("span",ko,_(t.account.name),1)])):x("",!0)]),a("div",wo,[a("div",{onClick:e[1]||(e[1]=(...n)=>t.goToProfile&&t.goToProfile(...n)),class:"list-group-item list-group-item-action hoverable"}," My Profile "),a("div",{class:"list-group-item list-group-item-action hoverable text-danger",onClick:e[2]||(e[2]=(...n)=>t.logout&&t.logout(...n))},Ko)])])):(c(),d("button",{key:0,class:"btn selectable text-white mx-2 lighten-30 text-uppercase my-2 my-lg-0",onClick:e[0]||(e[0]=(...n)=>t.login&&t.login(...n))}," Login "))])}var Co=f(_o,[["render",Io],["__scopeId","data-v-4a193d84"]]),To=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Co});const Ao={},Po={class:"modal fade modal-open",tabindex:"-1",role:"dialog","aria-labelledby":"modelTitleId","aria-hidden":"true"},So={class:"modal-fade modal-dialog modal-dialog-centered modal-xl",role:"document"},Eo={class:"modal-content border-0"},Oo={class:"modal-body p-0"};function $o(s,e,o,t,r,l){return c(),d("div",Po,[a("div",So,[a("div",Eo,[a("div",Oo,[be(s.$slots,"body")])])])])}var jo=f(Ao,[["render",$o]]),Mo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:jo}),Lo="/assets/logo-white.3c9672cc.png";const No={setup(){return{}}},qo=s=>(L("data-v-1b3e7226"),s=s(),N(),s),Do={class:"bg-primary d-flex flex-column flex-md-row justify-content-center justify-content-lg-between align-items-center align-items-md-center elevation-2"},Bo=qo(()=>a("img",{class:"img-fluid header-img p-3",src:Lo,alt:"",title:"Home",name:"Home"},null,-1)),Ro={class:"align-self-end align-self-md-center"};function Uo(s,e,o,t,r,l){const n=k("router-link"),C=k("Login");return c(),d("div",Do,[h(n,{to:{name:"Home"},title:"Home",name:"Home"},{default:O(()=>[Bo]),_:1}),a("div",Ro,[h(C)])])}var zo=f(No,[["render",Uo],["__scopeId","data-v-1b3e7226"]]),Ho=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:zo});const Fo={props:{vault:{type:Object,required:!0}},setup(s){return{async activeVault(e){await A.getKeep(e),b.getOrCreateInstance(document.getElementById("active-keep")).show()},goToVault(){V.push({name:"Vault",params:{id:s.vault.id}})}}}},Yo=["src","alt"],Wo={class:"text my-2 mx-2 p-1 px-2"};function Qo(s,e,o,t,r,l){return c(),d("div",{onClick:e[0]||(e[0]=(...n)=>t.goToVault&&t.goToVault(...n)),class:"elevation-2 rounded selectable grow wrapper text-white text-shadow fs-6",style:Y(`background-image: linear-gradient(to bottom, rgba(0, 0, 0, 0.01), rgba(0, 0, 0, 0.85) ), url('${o.vault.img}'); background-size: cover; overflow: hidden;`)},[a("img",{class:"img-fluid rounded card-img",src:o.vault.img,alt:o.vault.img},null,8,Yo),a("div",Wo,[a("span",null,_(o.vault.name),1)])],4)}var Go=f(Fo,[["render",Qo],["__scopeId","data-v-4fb07c60"]]),Zo=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:Go});const Xo={props:{keep:{type:Object,required:!0}},setup(s){return{async activeVaultKeep(e){await A.getKeep(e),i.activeKeep.vaultKeepId=s.keep.vaultKeepId,b.getOrCreateInstance(document.getElementById("active-keep")).show()},goToProfile(){V.push({name:"Profile",params:{id:s.keep.creatorId}})}}}},Jo=["src","alt"],ea={class:"text my-3 mx-2 p-1 px-2 bg-grey elevation-2 rounded"},ta=["src"];function oa(s,e,o,t,r,l){return c(),d("div",{onClick:e[1]||(e[1]=n=>t.activeVaultKeep(o.keep.id)),class:"elevation-2 rounded selectable grow card-img wrapper text-white text-shadow fs-3"},[a("img",{class:"img-fluid rounded",src:o.keep.img,alt:o.keep.img},null,8,Jo),a("div",ea,[a("span",null,_(o.keep.name),1)]),a("img",{onClick:e[0]||(e[0]=E((...n)=>t.goToProfile&&t.goToProfile(...n),["stop"])),class:"profile-img mb-3 mx-2 elevation-2 selectable grow-2",src:o.keep.creator.picture,alt:""},null,8,ta)])}var aa=f(Xo,[["render",oa]]),sa=Object.freeze({__proto__:null,[Symbol.toStringTag]:"Module",default:aa});function na(s){Object.entries({"./components/ActiveKeep.vue":Xt,"./components/Keep.vue":ro,"./components/KeepForm.vue":De,"./components/Login.vue":To,"./components/Modal.vue":Mo,"./components/Navbar.vue":Ho,"./components/Vault.vue":Zo,"./components/VaultForm.vue":it,"./components/VaultKeep.vue":sa}).forEach(([o,t])=>{const r=t.name||o.substr(o.lastIndexOf("/")+1).replace(/\.\w+$/,"");s.component(r,t.default)})}const ee=ye(dt);na(ee);ee.use(V).mount("#app");export{i as A,m as P,f as _,u as a,A as k,p as l,V as r,w as v};
